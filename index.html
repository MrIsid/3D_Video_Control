<html>
   <head>
      <meta charset="UTF-8">
      <title>Illusory 3D</title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <style>
         body {
			 padding: 0;
			 margin: 0;
         }
         video {
			 width: 100%;
			 height: 100%;
			 -webkit-touch-callout: none;
			 -webkit-user-select: none;
			 -khtml-user-select: none;
			 -moz-user-select: none;
			 -ms-user-select: none;
			 user-select: none; 
			 -webkit-tap-highlight-color: transparent;
			 outline: none;
         }
      </style>
   </head>
   <body>
      <video type="Illusory_3D" src="./video.mp4"></video>
      <script>
			window.oncontextmenu = function(event) {
				 event.preventDefault();
				 event.stopPropagation();
				 return false;
			};
	      window.onload = function() {
			var video = document.querySelectorAll("video[type='Illusory_3D']");
			window.token;
			video.forEach(function(video) {
				video.addEventListener("mousedown", (event) => {
				if (event.pageX > video.offsetWidth / 2) {
					if (video.currentTime > video.duration / 2) video.currentTime = (video.duration) - video.currentTime;
					window.token = setInterval(function () {if (video.currentTime > video.duration / 2) video.currentTime = 0;},1);
					video.play();
				} else if (event.pageX < video.offsetWidth / 2) {
					if (video.currentTime < video.duration / 2) video.currentTime = (video.duration) - video.currentTime;
					window.token = setInterval(function () {if (video.currentTime == video.duration) {video.currentTime = (video.duration/2);}},1);
					video.play();
				}
				});
				video.addEventListener("mouseup", (event) => {clearInterval(token);video.pause();});
				video.addEventListener("touchstart", (event) => {
				if (event.touches[0].pageX > video.offsetWidth / 2) {
					if (video.currentTime > video.duration / 2) video.currentTime = (video.duration) - video.currentTime;
					window.token = setInterval(function () {if (video.currentTime > video.duration / 2) video.currentTime = 0;},1);
					video.play();
				} else if (event.touches[0].pageX < video.offsetWidth / 2) {
					if (video.currentTime < video.duration / 2) video.currentTime = (video.duration) - video.currentTime;
					window.token = setInterval(function () {if (video.currentTime == video.duration) {video.currentTime = (video.duration/2);}},1);
					video.play();
				}
				});
				video.addEventListener("touchend", (event) => {clearInterval(token);video.pause();});
				
			});
		  }
      </script>
	</body>
</html>
